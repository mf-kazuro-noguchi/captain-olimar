# ランチルーレット - 要件定義書

## 📋 プロジェクト概要

### プロジェクト名
**ランチルーレット**

### 目的
日々のランチ選びの悩みを解決し、**現在地周辺の実際の店舗情報**を基に、ユーザーの条件に合ったランチの選択肢をランダムに提案する。

### ターゲットユーザー
- ランチで何を食べるか迷うオフィスワーカー
- 新しい店を発見したい人
- 時間や予算に制約がある人
- 実際に行ける近くの店を探している人

### 主要な特徴
- **リアルタイム位置情報**: ブラウザのGeolocation APIで現在地を取得
- **実店舗データ**: Google Places APIで周辺の実際の飲食店情報を取得
- **条件フィルタリング**: 予算・気分・移動時間で絞り込み
- **ランダム選出**: 迷いを解消するルーレット機能

---

## 🎯 機能要件

### 必須機能

#### 0. 位置情報取得・店舗データ取得機能 🆕
**位置情報取得**
- ブラウザのGeolocation APIを使用して現在地(緯度・経度)を取得
- ユーザーに位置情報の許可を求める
- 位置情報取得失敗時のエラーハンドリング

**Google Places API連携**
- Google Places API (Nearby Search)で周辺の飲食店を取得
- 検索半径: ユーザーが選択した移動時間に応じて動的に設定
  - 5分以内: 半径400m (徒歩5分≒80m/分)
  - 10分以内: 半径800m
  - 15分以内: 半径1200m
  - 20分以上: 半径1600m以上
- 取得する情報:
  - 店舗名 (name)
  - 住所 (vicinity)
  - 料理ジャンル (types)
  - 評価 (rating)
  - 価格レベル (price_level: 0-4)
  - 営業状況 (opening_hours)
  - 現在地からの距離

#### 1. 同行者選択機能 🆕
**同行者の設定**
- 固定値: **福室さん**
- チェックボックスで選択可能
- 選択時はカレンダー登録機能が有効になる

#### 2. フィルター選択機能
ユーザーが以下の3つの条件を選択できる:

**予算**
- 500円以下 (price_level: 1)
- 1000円以下 (price_level: 2)
- それ以上 (price_level: 3-4)

**気分**
- さっぱり (ジャンル: サラダ、和食、寿司など)
- がっつり (ジャンル: ラーメン、焼肉、カレーなど)
- 甘いもの (ジャンル: カフェ、スイーツなど)
- おしゃれ (ジャンル: イタリアン、フレンチ、カフェなど)

**移動時間**
- 5分以内 (半径400m)
- 10分以内 (半径800m)
- 15分以内 (半径1200m)
- 20分以上 (半径1600m)

#### 3. ルーレット実行機能
- 「回す!」ボタンをクリックすると、選択条件に合致する店舗をランダムに選出
- API取得済みの実店舗データから抽選
- 結果をアニメーション付きで表示

#### 4. 結果表示機能
以下の情報を表示:
- **店舗名** (実際の店名)
- 料理ジャンル
- **移動時間/距離** (現在地からの実際の距離)
- 予算感 (price_level)
- 評価 (rating)
- (オプション)営業時間
- (オプション)Google Mapsへのリンク
- **同行者情報** (福室さんと一緒の場合) 🆕

#### 5. Outlookカレンダー連携機能 🆕
**カレンダー登録**
- 「Outlookに予定を追加」ボタンを表示
- ボタンクリックで以下の方法でカレンダーに登録:
  - **方法1(推奨)**: .icsファイルを生成してダウンロード
  - **方法2**: Outlook Web URL schemeを使用
  - **方法3(高度)**: Microsoft Graph APIで直接登録

**イベント情報**
- タイトル: 「🍱 ランチ @ [店舗名]」
- 参加者: 福室さん (メールアドレス)
- 開始時刻: 現在時刻から12:00または指定時刻
- 所要時間: 1時間
- 場所: 店舗名 + 住所
- 説明: 
  - 料理ジャンル
  - 予算感
  - 評価
  - Google Mapsリンク
  - 「ランチルーレットで決定」

---

## 🏗️ 技術要件

### 推奨技術スタック

#### フロントエンド
- **HTML5** + **CSS3** + **JavaScript**
  - または **React** (より動的なUIの場合)
- **Geolocation API**: ブラウザ標準のnavigator.geolocationを使用
- **デザイン**: シンプルで直感的なUI
  - レスポンシブデザイン対応(スマホでも使える)

#### API連携
- **Google Places API**
  - Places API - Nearby Search: 周辺の飲食店検索
  - Places API - Place Details (オプション): 詳細情報取得
  - APIキーの取得が必要 (Google Cloud Console)
  - **重要**: APIキーの管理(環境変数化推奨)
  
#### データ管理
- APIから取得したリアルタイムデータを使用
- フロントエンドでのデータフィルタリング・キャッシュ
- (オプション)LocalStorageで取得データの一時保存

#### 必要な設定・準備
1. **Google Cloud Platform アカウント**
   - プロジェクト作成
   - Places APIの有効化
   - APIキーの発行と制限設定

2. **APIキーの保護**
   - HTTP Referer制限
   - APIキー使用量の監視
   - 無料枠: $200分/月のクレジット

#### AI活用ポイント
以下のいずれか、または複数を活用:
1. **開発フェーズ**: ChatGPT/Claudeでコード生成
   - 「Geolocation APIで現在地を取得するコードを書いて」
   - 「Google Places APIを呼び出すJavaScript関数を作って」
2. **API連携**: AIでAPIリクエスト・レスポンス処理のコード生成
3. **エラーハンドリング**: AIで位置情報取得失敗時の処理を実装
4. **UI/UX**: AIにデザインアドバイスを依頼
5. **機能拡張案**: AIで追加機能のアイデア出し

---

## 🎨 UI/UX要件

### レイアウト構成

```
┌─────────────────────────────────┐
│     🍱 ランチルーレット          │
├─────────────────────────────────┤
│                                 │
│  📍 現在地: 東京都渋谷区...     │
│  🔍 周辺の店舗: 23件見つかりました│
│                                 │
│  [ 同行者 ] 🆕                  │
│  ☑ 福室さんと一緒に行く          │
│                                 │
│  [ 予算を選ぶ ]                 │
│  ○ 500円以下                    │
│  ○ 1000円以下                   │
│  ○ それ以上                     │
│                                 │
│  [ 気分を選ぶ ]                 │
│  ○ さっぱり                     │
│  ○ がっつり                     │
│  ○ 甘いもの                     │
│  ○ おしゃれ                     │
│                                 │
│  [ 移動時間を選ぶ ]              │
│  ○ 5分以内                      │
│  ○ 10分以内                     │
│  ○ 15分以内                     │
│  ○ 20分以上                     │
│                                 │
│     [ 🎲 回す! ]                │
│                                 │
├─────────────────────────────────┤
│  【結果エリア】                  │
│                                 │
│  今日は『カレーハウスCoCo壱番屋』│
│  ジャンル: カレー                │
│  移動時間: 徒歩約8分 (600m)     │
│  予算: ¥¥ | 評価: ★★★★☆ 4.2   │
│  👥 同行者: 福室さん 🆕          │
│                                 │
│  [📍 地図で見る]                │
│  [📅 Outlookに予定を追加] 🆕    │
│                                 │
└─────────────────────────────────┘
```

### デザイン要件
- **カラースキーム**: 明るく親しみやすい配色(食欲をそそる暖色系推奨)
- **フォント**: 読みやすい日本語フォント
- **アニメーション**: ルーレットが回転する演出(1-2秒程度)
- **レスポンシブ**: スマホ・タブレット・PCで表示可能

---

## 📊 データ構造

### Google Places API レスポンス構造

#### Nearby Search API リクエスト例

```javascript
const location = `${latitude},${longitude}`;
const radius = 800; // メートル
const type = 'restaurant';
const apiKey = 'YOUR_API_KEY';

const url = `https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${location}&radius=${radius}&type=${type}&key=${apiKey}`;
```

#### レスポンスデータ(簡略版)

```json
{
  "results": [
    {
      "name": "カレーハウスCoCo壱番屋",
      "vicinity": "東京都渋谷区道玄坂1-2-3",
      "geometry": {
        "location": {
          "lat": 35.6594,
          "lng": 139.6981
        }
      },
      "types": ["restaurant", "food"],
      "rating": 4.2,
      "price_level": 2,
      "opening_hours": {
        "open_now": true
      },
      "place_id": "ChIJN1t_tDeuEmsRUsoyG83frY4"
    }
  ],
  "status": "OK"
}
```

### アプリ内データ構造(整形後)

```json
{
  "restaurants": [
    {
      "id": "ChIJN1t_tDeuEmsRUsoyG83frY4",
      "name": "カレーハウスCoCo壱番屋",
      "genre": "カレー",
      "address": "東京都渋谷区道玄坂1-2-3",
      "lat": 35.6594,
      "lng": 139.6981,
      "distance": 600,
      "travelTime": 8,
      "budget": "1000円以下",
      "priceLevel": 2,
      "mood": ["がっつり"],
      "rating": 4.2,
      "isOpen": true,
      "placeId": "ChIJN1t_tDeuEmsRUsoyG83frY4"
    }
  ]
}
```

### データ項目定義

| 項目 | 型 | 説明 | 取得元 |
|------|-----|------|--------|
| id | string | 店舗ID(place_id) | API |
| name | string | 店舗名 | API |
| genre | string | 料理ジャンル | APIのtypesから推定 |
| address | string | 住所 | API (vicinity) |
| lat | number | 緯度 | API |
| lng | number | 経度 | API |
| distance | number | 現在地からの距離(m) | 計算 |
| travelTime | number | 移動時間(分) | 計算 (80m/分) |
| budget | string | 予算カテゴリ | price_levelから変換 |
| priceLevel | number | 価格レベル(0-4) | API |
| mood | array | 該当する気分 | typesから推定 |
| rating | number | 評価(0-5) | API |
| isOpen | boolean | 営業中かどうか | API |
| placeId | string | Google Place ID | API |

### price_levelマッピング

| price_level | 予算カテゴリ | 目安 |
|-------------|------------|------|
| 0 | 無料 | - |
| 1 | 500円以下 | ¥ |
| 2 | 1000円以下 | ¥¥ |
| 3 | それ以上 | ¥¥¥ |
| 4 | それ以上 | ¥¥¥¥ |

### typesから気分への変換ロジック

```javascript
const moodMapping = {
  'さっぱり': ['japanese_restaurant', 'sushi_restaurant', 'salad', 'healthy'],
  'がっつり': ['ramen_restaurant', 'yakiniku_restaurant', 'curry_restaurant', 'meat'],
  '甘いもの': ['cafe', 'bakery', 'dessert', 'ice_cream'],
  'おしゃれ': ['italian_restaurant', 'french_restaurant', 'cafe', 'bistro']
};
```

### カレンダーイベントデータ構造 🆕

#### イベント情報
```javascript
{
  "event": {
    "title": "🍱 ランチ @ カレーハウスCoCo壱番屋",
    "startTime": "2025-10-31T12:00:00", // ISO 8601形式
    "endTime": "2025-10-31T13:00:00",
    "location": "カレーハウスCoCo壱番屋 - 東京都渋谷区道玄坂1-2-3",
    "attendees": [
      {
        "name": "福室",
        "email": "fukumuro@example.com" // 実際のメールアドレスに置き換え
      }
    ],
    "description": "ランチルーレットで決定！\n\nジャンル: カレー\n予算: ¥¥\n評価: ★★★★☆ 4.2\n移動時間: 徒歩約8分\n\nGoogle Maps: https://www.google.com/maps/..."
  }
}
```

#### .icsファイル形式例
```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//ランチルーレット//JP
BEGIN:VEVENT
UID:lunch-roulette-${timestamp}@example.com
DTSTAMP:20251031T030000Z
DTSTART:20251031T030000Z
DTEND:20251031T040000Z
SUMMARY:🍱 ランチ @ カレーハウスCoCo壱番屋
LOCATION:カレーハウスCoCo壱番屋 - 東京都渋谷区道玄坂1-2-3
DESCRIPTION:ランチルーレットで決定！\n\nジャンル: カレー\n予算: ¥¥
ATTENDEE;CN=福室;RSVP=TRUE:mailto:fukumuro@example.com
STATUS:CONFIRMED
END:VEVENT
END:VCALENDAR
```

---

## ⚙️ 機能詳細仕様

### 0. 位置情報取得とAPI連携フロー 🆕

```javascript
// 全体フロー
async function initializeApp() {
  try {
    // 1. 位置情報取得
    const position = await getCurrentPosition();
    const { latitude, longitude } = position.coords;
    
    // 2. 住所表示(オプション)
    displayCurrentLocation(latitude, longitude);
    
    // 3. 初期半径で店舗検索(例: 1000m)
    const restaurants = await fetchNearbyRestaurants(latitude, longitude, 1000);
    
    // 4. データ整形・保存
    const formattedData = formatRestaurantData(restaurants, latitude, longitude);
    saveToCache(formattedData);
    
    // 5. UI更新
    updateUI(formattedData.length);
    
  } catch (error) {
    handleLocationError(error);
  }
}

// 位置情報取得
function getCurrentPosition() {
  return new Promise((resolve, reject) => {
    if (!navigator.geolocation) {
      reject(new Error('位置情報がサポートされていません'));
      return;
    }
    
    navigator.geolocation.getCurrentPosition(
      position => resolve(position),
      error => reject(error),
      {
        enableHighAccuracy: true,
        timeout: 10000,
        maximumAge: 300000 // 5分間キャッシュ
      }
    );
  });
}

// Google Places API呼び出し
async function fetchNearbyRestaurants(lat, lng, radius) {
  const apiKey = 'YOUR_API_KEY';
  const url = `https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${lat},${lng}&radius=${radius}&type=restaurant&language=ja&key=${apiKey}`;
  
  // CORS対策: バックエンドプロキシ経由 or JSONP
  const response = await fetch(url);
  const data = await response.json();
  
  if (data.status !== 'OK') {
    throw new Error(`API Error: ${data.status}`);
  }
  
  return data.results;
}

// 距離計算(Haversine formula)
function calculateDistance(lat1, lon1, lat2, lon2) {
  const R = 6371e3; // 地球の半径(m)
  const φ1 = lat1 * Math.PI / 180;
  const φ2 = lat2 * Math.PI / 180;
  const Δφ = (lat2 - lat1) * Math.PI / 180;
  const Δλ = (lon2 - lon1) * Math.PI / 180;
  
  const a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +
            Math.cos(φ1) * Math.cos(φ2) *
            Math.sin(Δλ/2) * Math.sin(Δλ/2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  
  return Math.round(R * c); // メートル
}

// データ整形
function formatRestaurantData(apiResults, userLat, userLng) {
  return apiResults.map(place => ({
    id: place.place_id,
    name: place.name,
    genre: extractGenre(place.types),
    address: place.vicinity,
    lat: place.geometry.location.lat,
    lng: place.geometry.location.lng,
    distance: calculateDistance(userLat, userLng, place.geometry.location.lat, place.geometry.location.lng),
    travelTime: Math.ceil(calculateDistance(userLat, userLng, place.geometry.location.lat, place.geometry.location.lng) / 80), // 80m/分
    budget: convertPriceLevel(place.price_level),
    priceLevel: place.price_level || 2,
    mood: extractMood(place.types),
    rating: place.rating || 0,
    isOpen: place.opening_hours?.open_now || null,
    placeId: place.place_id
  }));
}

// ジャンル抽出
function extractGenre(types) {
  const genreMap = {
    'ramen_restaurant': 'ラーメン',
    'sushi_restaurant': '寿司',
    'curry_restaurant': 'カレー',
    'italian_restaurant': 'イタリアン',
    'french_restaurant': 'フレンチ',
    'yakiniku_restaurant': '焼肉',
    'cafe': 'カフェ',
    'bakery': 'ベーカリー',
    'japanese_restaurant': '和食'
  };
  
  for (let type of types) {
    if (genreMap[type]) return genreMap[type];
  }
  return 'レストラン';
}

// 気分抽出
function extractMood(types) {
  const moods = [];
  const moodMap = {
    'さっぱり': ['japanese_restaurant', 'sushi_restaurant'],
    'がっつり': ['ramen_restaurant', 'yakiniku_restaurant', 'curry_restaurant'],
    '甘いもの': ['cafe', 'bakery', 'dessert'],
    'おしゃれ': ['italian_restaurant', 'french_restaurant', 'cafe']
  };
  
  for (let [mood, keywords] of Object.entries(moodMap)) {
    if (types.some(type => keywords.includes(type))) {
      moods.push(mood);
    }
  }
  
  return moods.length > 0 ? moods : ['がっつり']; // デフォルト
}

// price_level変換
function convertPriceLevel(level) {
  if (!level || level <= 1) return '500円以下';
  if (level === 2) return '1000円以下';
  return 'それ以上';
}
```

### 1. フィルター選択ロジック
- ラジオボタンで各カテゴリから1つずつ選択
- 移動時間選択時に再検索(半径を変更してAPI再呼び出し)
- 選択変更は即座に反映

### 2. ルーレット実行ロジック

```javascript
// 疑似コード
function executeRoulette(budget, mood, travelTime) {
  // 1. キャッシュからデータ取得
  const allRestaurants = getFromCache();
  
  // 2. 条件でフィルタリング
  const filteredRestaurants = filterRestaurants(allRestaurants, budget, mood, travelTime);
  
  // 3. 該当店舗がない場合のエラーハンドリング
  if (filteredRestaurants.length === 0) {
    return {
      error: true,
      message: "条件に合う店舗が見つかりませんでした。条件を変えてみてください。"
    };
  }
  
  // 4. ランダムに1件選出
  const randomIndex = Math.floor(Math.random() * filteredRestaurants.length);
  const selectedRestaurant = filteredRestaurants[randomIndex];
  
  // 5. 結果を返す
  return {
    error: false,
    data: selectedRestaurant
  };
}
```

### 3. フィルタリングロジック

```javascript
function filterRestaurants(restaurants, budget, mood, travelTime) {
  return restaurants.filter(restaurant => {
    // 予算チェック
    if (budget && restaurant.budget !== budget) return false;
    
    // 気分チェック(配列内に含まれているか)
    if (mood && !restaurant.mood.includes(mood)) return false;
    
    // 移動時間チェック
    if (travelTime) {
      const maxTime = parseTimeRange(travelTime); // "5分以内" → 5
      if (restaurant.travelTime > maxTime) return false;
    }
    
    // 営業中チェック(オプション)
    // if (restaurant.isOpen === false) return false;
    
    return true;
  });
}

function parseTimeRange(timeStr) {
  const match = timeStr.match(/(\d+)分/);
  return match ? parseInt(match[1]) : 999;
}
```

### 4. エラーハンドリング

```javascript
function handleLocationError(error) {
  let message;
  
  switch(error.code) {
    case error.PERMISSION_DENIED:
      message = "位置情報の使用が拒否されました。ブラウザの設定を確認してください。";
      break;
    case error.POSITION_UNAVAILABLE:
      message = "位置情報が取得できませんでした。";
      break;
    case error.TIMEOUT:
      message = "位置情報の取得がタイムアウトしました。";
      break;
    default:
      message = "エラーが発生しました。";
  }
  
  // UI更新
  showError(message);
  
  // フォールバック: デフォルト位置(例: 東京駅)を使用
  const defaultLocation = { lat: 35.6812, lng: 139.7671 };
  initializeWithLocation(defaultLocation);
}
```

### 5. Outlookカレンダー連携ロジック 🆕

#### 方法1: .icsファイル生成(推奨)

```javascript
function generateICSFile(restaurant, withCompanion) {
  // ランチ時間の設定(12:00-13:00)
  const today = new Date();
  const lunchStart = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 12, 0, 0);
  const lunchEnd = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 13, 0, 0);
  
  // ICS形式の日時変換
  const formatICSDate = (date) => {
    return date.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
  };
  
  // ICSファイルコンテンツ生成
  const icsContent = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//ランチルーレット//JP
CALSCALE:GREGORIAN
METHOD:REQUEST
BEGIN:VEVENT
UID:lunch-${Date.now()}@lunch-roulette.com
DTSTAMP:${formatICSDate(new Date())}
DTSTART:${formatICSDate(lunchStart)}
DTEND:${formatICSDate(lunchEnd)}
SUMMARY:🍱 ランチ @ ${restaurant.name}
LOCATION:${restaurant.name} - ${restaurant.address}
DESCRIPTION:ランチルーレットで決定！\\n\\nジャンル: ${restaurant.genre}\\n予算: ${restaurant.budget}\\n評価: ${'★'.repeat(Math.floor(restaurant.rating))}\\n移動時間: 徒歩約${restaurant.travelTime}分\\n\\nGoogle Maps: https://www.google.com/maps/search/?api=1&query_place_id=${restaurant.placeId}
${withCompanion ? 'ATTENDEE;CN=福室;RSVP=TRUE;PARTSTAT=NEEDS-ACTION;ROLE=REQ-PARTICIPANT:mailto:fukumuro@example.com' : ''}
STATUS:CONFIRMED
SEQUENCE:0
END:VEVENT
END:VCALENDAR`;

  return icsContent;
}

function downloadICSFile(restaurant, withCompanion) {
  const icsContent = generateICSFile(restaurant, withCompanion);
  
  // Blobを作成
  const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
  
  // ダウンロードリンクを作成
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = `lunch-${restaurant.name}-${Date.now()}.ics`;
  
  // クリックしてダウンロード
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  
  // メモリ解放
  URL.revokeObjectURL(link.href);
}
```

#### 方法2: Outlook Web URL (簡易版)

```javascript
function openOutlookWeb(restaurant, withCompanion) {
  const today = new Date();
  const lunchStart = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 12, 0, 0);
  const lunchEnd = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 13, 0, 0);
  
  // Outlook Web URL形式
  const params = new URLSearchParams({
    path: '/calendar/action/compose',
    rru: 'addevent',
    subject: `🍱 ランチ @ ${restaurant.name}`,
    startdt: lunchStart.toISOString(),
    enddt: lunchEnd.toISOString(),
    location: `${restaurant.name} - ${restaurant.address}`,
    body: `ランチルーレットで決定！\n\nジャンル: ${restaurant.genre}\n予算: ${restaurant.budget}\n評価: ${'★'.repeat(Math.floor(restaurant.rating))}\n移動時間: 徒歩約${restaurant.travelTime}分\n\nGoogle Maps: https://www.google.com/maps/search/?api=1&query_place_id=${restaurant.placeId}`,
  });
  
  if (withCompanion) {
    params.append('to', 'fukumuro@example.com');
  }
  
  const outlookUrl = `https://outlook.office.com/calendar/0/deeplink/compose?${params.toString()}`;
  window.open(outlookUrl, '_blank');
}
```

#### 方法3: Microsoft Graph API (高度)

```javascript
// 認証トークンが必要
async function addToOutlookCalendar(restaurant, withCompanion, accessToken) {
  const today = new Date();
  const lunchStart = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 12, 0, 0);
  const lunchEnd = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 13, 0, 0);
  
  const event = {
    subject: `🍱 ランチ @ ${restaurant.name}`,
    start: {
      dateTime: lunchStart.toISOString(),
      timeZone: 'Asia/Tokyo'
    },
    end: {
      dateTime: lunchEnd.toISOString(),
      timeZone: 'Asia/Tokyo'
    },
    location: {
      displayName: `${restaurant.name} - ${restaurant.address}`
    },
    body: {
      contentType: 'text',
      content: `ランチルーレットで決定！\n\nジャンル: ${restaurant.genre}\n予算: ${restaurant.budget}\n評価: ${'★'.repeat(Math.floor(restaurant.rating))}\n移動時間: 徒歩約${restaurant.travelTime}分\n\nGoogle Maps: https://www.google.com/maps/search/?api=1&query_place_id=${restaurant.placeId}`
    },
    attendees: withCompanion ? [{
      emailAddress: {
        address: 'fukumuro@example.com',
        name: '福室'
      },
      type: 'required'
    }] : []
  };
  
  const response = await fetch('https://graph.microsoft.com/v1.0/me/events', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${accessToken}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(event)
  });
  
  if (!response.ok) {
    throw new Error('カレンダーへの登録に失敗しました');
  }
  
  return await response.json();
}
```

#### UI連携

```javascript
// ボタンクリック時の処理
document.getElementById('addToOutlookBtn').addEventListener('click', () => {
  const withCompanion = document.getElementById('companionCheckbox').checked;
  
  // 方法1: .icsファイルをダウンロード(推奨)
  downloadICSFile(selectedRestaurant, withCompanion);
  
  // または 方法2: Outlook Webを開く
  // openOutlookWeb(selectedRestaurant, withCompanion);
  
  alert('カレンダーファイルをダウンロードしました！\nファイルを開いてOutlookに登録してください。');
});
```

---

## 🚀 実装の優先順位

### Phase 0: 環境準備 🆕
1. Google Cloud Platformアカウント作成
2. Places APIの有効化
3. APIキーの発行と設定
4. APIキーの保護設定(HTTP Referer制限)

### Phase 1: MVP(最小限の動作版)
1. 基本的なHTML構造の作成
2. **Geolocation APIで位置情報取得** 🆕
3. **Google Places APIで周辺店舗取得(テスト)** 🆕
4. 取得データの表示確認
5. フィルター選択UI(ラジオボタン)
6. ルーレット実行ボタン
7. 結果表示エリア

### Phase 2: 機能実装
1. **データ整形・距離計算ロジック** 🆕
2. **予算・気分・移動時間によるフィルタリング** 🆕
3. **同行者選択UI(福室さん固定)** 🆕
4. ルーレット抽選ロジック
5. 結果表示(店名、ジャンル、距離、評価など)
6. **.icsファイル生成ロジック** 🆕
7. **「Outlookに予定を追加」ボタン** 🆕
8. エラーハンドリング(位置情報取得失敗、API失敗)

### Phase 3: UI/UX改善
1. ルーレット回転アニメーション
2. 結果表示のビジュアル改善
3. ローディング表示
4. レスポンシブデザイン対応
5. カレンダー登録成功メッセージ 🆕

### Phase 4: 追加機能(時間があれば)
1. **Google Mapsへのリンク** 🆕
2. **Microsoft Graph API連携(Outlook直接登録)** 🆕
3. 「もう一度回す」ボタン
4. お気に入り機能(LocalStorage)
5. 履歴機能
6. 店舗詳細情報の表示
7. 口コミ表示(Place Details API)

---

### 開発時の注意点 🆕

#### CORS問題の対処
Google Places APIは直接ブラウザから呼び出すとCORSエラーが発生する場合があります。
解決策:
1. **Places API (JavaScript版)を使用** (推奨)
   - HTML Scriptタグで読み込み
   - `google.maps.places.PlacesService`を使用
2. バックエンドプロキシ経由でAPI呼び出し
3. Cloud Functionsなどサーバーレス関数を経由

#### APIキーの保護
- 本番環境ではAPIキーを環境変数化
- HTTP Referer制限を設定
- API使用量の監視

#### 推奨実装: Places JavaScript API

```html
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"></script>
```

```javascript
// PlacesServiceを使用(CORSエラー回避)
const map = new google.maps.Map(document.createElement('div'));
const service = new google.maps.places.PlacesService(map);

const request = {
  location: new google.maps.LatLng(latitude, longitude),
  radius: 800,
  type: 'restaurant'
};

service.nearbySearch(request, (results, status) => {
  if (status === google.maps.places.PlacesServiceStatus.OK) {
    // データ処理
    processResults(results);
  }
});
```

---

## 🧪 テストシナリオ

### 位置情報・API連携テスト 🆕
- [ ] 位置情報の許可が正常に動作する
- [ ] 位置情報取得が成功する
- [ ] Google Places APIからデータが正常に取得できる
- [ ] 取得した店舗数が表示される
- [ ] APIエラー時の処理が正常に動作する
- [ ] 位置情報拒否時のフォールバック処理が動作する

### データ処理テスト 🆕
- [ ] 距離計算が正確である
- [ ] 移動時間計算が正確である(距離÷80m/分)
- [ ] price_levelから予算カテゴリへの変換が正しい
- [ ] typesから気分への変換が正しい
- [ ] ジャンル抽出が正しい

### 同行者・カレンダー連携テスト 🆕
- [ ] 福室さんのチェックボックスが表示される
- [ ] チェック時にOutlookボタンが有効になる
- [ ] .icsファイルが正常に生成される
- [ ] ダウンロードした.icsファイルがOutlookで開ける
- [ ] カレンダーイベントに福室さんが参加者として含まれる
- [ ] イベント情報(店名、時間、場所)が正確である
- [ ] 同行者未選択時は参加者なしでイベント作成される

### 基本動作テスト
- [ ] フィルター選択が正常に動作する
- [ ] 「回す」ボタンで結果が表示される
- [ ] 実際の店舗名が表示される 🆕
- [ ] 複数回実行しても正常に動作する

### フィルタリングテスト
- [ ] 予算フィルターが正常に機能する
- [ ] 気分フィルターが正常に機能する
- [ ] 移動時間フィルターが正常に機能する
- [ ] 複数フィルターの組み合わせが正常に動作する
- [ ] 移動時間変更時に適切な半径で再検索される 🆕

### エッジケーステスト
- [ ] 該当する店舗が0件の場合の処理
- [ ] 該当する店舗が1件のみの場合
- [ ] 全フィルター未選択の場合
- [ ] API制限に達した場合の処理 🆕
- [ ] ネットワークエラー時の処理 🆕

### UI/UXテスト
- [ ] スマホで表示・操作できる
- [ ] PCで表示・操作できる
- [ ] ボタンの反応が適切
- [ ] アニメーションがスムーズ
- [ ] ローディング表示が適切 🆕
- [ ] Google Mapsリンクが正常に動作する 🆕

### パフォーマンステスト 🆕
- [ ] 位置情報取得が10秒以内に完了する
- [ ] API呼び出しが3秒以内に完了する
- [ ] ページ読み込みが遅くない
- [ ] データキャッシュが正常に機能する

---

## 📦 成果物

### 提出物
1. **動作するプロダクト**
   - index.html
   - style.css
   - script.js
   - config.js (APIキー管理) 🆕
   - .env.example (環境変数のサンプル) 🆕

2. **発表資料**
   - 作成したソリューションの説明
   - **実際の店舗データを使っている点を強調** 🆕
   - AI活用ポイントの明示
   - デモ画面のキャプチャ
   - **位置情報とGoogle API連携のフロー図** �新

3. **README.md**
   - 使い方
   - **Google API キーの設定方法** 🆕
   - 技術スタック
   - AI活用箇所
   - **制限事項・注意点** 🆕

### README.md テンプレート 🆕

```markdown
# 🍱 ランチルーレット

現在地周辺の実際の店舗から、条件に合ったランチをランダムに選んでくれるアプリです。

## 機能
- 現在地の自動取得
- Google Places APIで実店舗データ取得
- 予算・気分・移動時間でフィルタリング
- ルーレット抽選
- 🆕 福室さんとの同行者設定
- 🆕 Outlookカレンダーに自動登録

## セットアップ

### 1. Google API キーの取得
1. Google Cloud Consoleでプロジェクト作成
2. Places APIを有効化
3. APIキーを発行

### 2. 設定
`config.js`を作成し、APIキーと福室さんのメールアドレスを設定:
```javascript
const CONFIG = {
  GOOGLE_API_KEY: 'YOUR_API_KEY_HERE',
  FUKUMURO_EMAIL: 'fukumuro@example.com' // 実際のメールアドレス
};
```

### 3. 起動
ブラウザで`index.html`を開く

## 使い方
1. 位置情報の使用を許可
2. 福室さんと一緒に行く場合はチェック
3. 条件を選択
4. 「回す!」ボタンをクリック
5. 結果が出たら「Outlookに予定を追加」をクリック
6. ダウンロードされた.icsファイルを開く

## 技術スタック
- HTML/CSS/JavaScript
- Geolocation API
- Google Places API
- .ics (iCalendar)形式

## AI活用
- コード生成: Claude/ChatGPTでロジック実装
- データ変換ロジック: AIで効率的に実装
- UI/UX: AIのアドバイスを参考に設計
- 🆕 .icsファイル生成ロジック: AIで実装

## 制限事項
- Google Places APIの無料枠: 月$200分
- 位置情報の精度に依存
- ネットワーク接続が必要
- Outlookまたは.ics対応カレンダーアプリが必要
```

---

## 💡 AI活用アイデア

### 開発フェーズでのAI活用(具体例)

#### 1. **位置情報取得のコード生成** 🆕
**プロンプト例:**
```
JavaScriptでGeolocation APIを使って現在地を取得する関数を書いて。
エラーハンドリングも含めてください。
```

#### 2. **Google Places API連携コード** 🆕
**プロンプト例:**
```
Google Places API (JavaScript版)を使って、
緯度経度から半径800m以内のレストランを取得する
コードを書いてください。
```

#### 3. **距離計算ロジック** 🆕
**プロンプト例:**
```
Haversine公式を使って、2つの緯度経度間の
距離をメートルで計算するJavaScript関数を作成してください。
```

#### 4. **データ変換ロジック** 🆕
**プロンプト例:**
```
Google Places APIのtypes配列から、
料理のジャンルを日本語で判定する関数を作ってください。
例: ['restaurant', 'ramen_restaurant'] → 'ラーメン'
```

#### 5. **コード最適化**
**プロンプト例:**
```
このコードをレビューして、パフォーマンスを改善してください:
[コードを貼り付け]
```

#### 6. **CSSアニメーション**
**プロンプト例:**
```
ルーレットが回転するようなCSSアニメーションを作って。
2秒かけてゆっくり回転して止まる感じで。
```

#### 7. **バグ修正**
エラーメッセージを貼り付けて原因と解決策を聞く
```
このエラーの原因と修正方法を教えて:
Uncaught TypeError: Cannot read property 'lat' of undefined
```

#### 8. **UI改善アドバイス**
```
このランチルーレットのUIをもっと使いやすくするには?
現在のデザインは[説明]です。
```

#### 9. **.icsファイル生成ロジック** 🆕
**プロンプト例:**
```
JavaScriptでiCalendar形式(.ics)のファイルを生成して
ダウンロードする関数を作成してください。
イベント情報は以下の通りです:
- タイトル、開始時刻、終了時刻、場所、説明、参加者
```

#### 10. **Outlookカレンダー連携** 🆕
**プロンプト例:**
```
.icsファイルをJavaScriptで生成して、ユーザーにダウンロードさせる
コードを書いてください。VCALENDARのフォーマットに準拠してください。
```

### プロダクトでのAI活用(拡張案)
- **GPT APIを使った店舗レコメンデーション**: ユーザーの好みを学習
- **画像認識**: 料理の写真から気分を判定
- **自然言語処理**: 「辛いものが食べたい」などの自由入力対応

### チーム開発でのAI活用 🆕
- **タスク分解**: 「このプロジェクトをチーム4人で分担するには?」
- **進捗管理**: 「〇〇の実装が遅れてます。優先順位を見直すには?」
- **コードレビュー**: 「このコードの改善点を教えて」

---

## 🎨 デザインリファレンス

### カラーパレット案
- **メインカラー**: #FF6B6B (元気なレッド)
- **サブカラー**: #FFD93D (楽しいイエロー)
- **アクセント**: #6BCF7F (さわやかグリーン)
- **背景**: #FFFFFF / #F8F9FA

### アイコン
- 🍱 ランチボックス(タイトル)
- 🎲 ダイス(回すボタン)
- 💰 お金(予算)
- 😋 顔(気分)
- 🚶 歩く人(移動時間)

---

## ⏰ タイムボックス(参考)

| 時間 | タスク |
|------|--------|
| 09:00-09:30 | 概要説明・要件整理・技術選定 |
| 09:30-10:00 | **Google API設定・動作確認** 🆕 |
| 10:00-12:00 | 開発(位置情報取得・API連携・基本UI) |
| 12:00-13:00 | 昼休憩 |
| 13:00-15:00 | 開発続き(フィルタリング・ルーレット・デバッグ) |
| 15:00-16:00 | テスト・動作確認・最終調整 |
| 16:00-16:30 | UI/UX改善・デプロイ準備 |
| 16:30-17:00 | 発表資料作成 |

### 役割分担例 🆕

| 役割 | タスク |
|------|--------|
| **API担当** | Google API設定、位置情報取得、データ取得ロジック |
| **フロント担当** | HTML/CSS、UI実装、アニメーション |
| **ロジック担当** | フィルタリング、ルーレット抽選、データ変換 |
| **資料担当** | 発表スライド作成、README作成、デモ準備 |

※全員が何かしら関わること!

---

## 🏁 成功の定義

### 最低限のゴール
- [ ] フィルター選択とルーレット機能が動作する
- [ ] 結果が正しく表示される
- [ ] デモができる状態

### 理想のゴール
- [ ] アニメーションが滑らか
- [ ] デザインが洗練されている
- [ ] スマホでも快適に使える
- [ ] AI活用ポイントが明確

---

---

## 🔧 Google API設定ガイド(詳細手順)

### ステップ1: Google Cloud Platformアカウント作成
1. [Google Cloud Console](https://console.cloud.google.com/)にアクセス
2. Googleアカウントでログイン
3. 利用規約に同意

### ステップ2: プロジェクト作成
1. 画面上部の「プロジェクトを選択」をクリック
2. 「新しいプロジェクト」をクリック
3. プロジェクト名: `lunch-roulette-hackathon`など
4. 「作成」をクリック

### ステップ3: Places APIの有効化
1. 左メニュー「APIとサービス」→「ライブラリ」
2. 検索窓で「Places API」を検索
3. 「Places API」をクリック
4. 「有効にする」をクリック

### ステップ4: APIキーの作成
1. 左メニュー「APIとサービス」→「認証情報」
2. 「認証情報を作成」→「APIキー」を選択
3. APIキーが生成される(コピーしておく)

### ステップ5: APIキーの制限設定(重要!)
1. 生成されたAPIキーの右側「✏️編集」をクリック
2. **アプリケーションの制限**:
   - 「HTTPリファラー」を選択
   - ウェブサイトの制限を追加:
     - `localhost:*` (開発用)
     - `127.0.0.1:*` (開発用)
     - 本番URLがあれば追加
3. **APIの制限**:
   - 「キーを制限」を選択
   - 「Places API」のみにチェック
4. 「保存」をクリック

### ステップ6: コードに組み込み

#### config.js ファイルを作成
```javascript
// config.js
const CONFIG = {
  GOOGLE_API_KEY: 'YOUR_API_KEY_HERE',
  FUKUMURO_EMAIL: 'fukumuro@example.com' // 🆕 福室さんの実際のメールアドレス
};
```

#### HTML で読み込み
```html
<!-- index.html -->
<script src="config.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"></script>
<script src="script.js"></script>
```

### ステップ7: 動作確認
1. ブラウザでindex.htmlを開く
2. コンソールにエラーが出ないか確認
3. Google Places APIが正常に呼び出せるかテスト

### トラブルシューティング

#### エラー: "This API project is not authorized to use this API"
→ Places APIが有効化されていない。ステップ3を再確認。

#### エラー: "REQUEST_DENIED"
→ APIキーの制限設定が間違っている。ステップ5を再確認。

#### エラー: "Geolocation error"
→ HTTPSまたはlocalhostで開いているか確認。

#### エラー: CORS問題
→ Places JavaScript APIを使用しているか確認(REST APIは直接呼べない)。

---

## 💻 サンプルコード(最小構成)

### index.html
```html
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🍱 ランチルーレット</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>🍱 ランチルーレット</h1>
    <div id="status">位置情報を取得中...</div>
    <div id="restaurant-count"></div>
    
    <!-- 同行者選択 -->
    <div class="companion-section">
      <label>
        <input type="checkbox" id="companionCheckbox">
        👥 福室さんと一緒に行く
      </label>
    </div>
    
    <button id="rouletteBtn">🎲 回す!</button>
    
    <div id="result"></div>
  </div>
  
  <script src="config.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"></script>
  <script src="script.js"></script>
</body>
</html>
```

### script.js (基本構造)
```javascript
let userLocation = null;
let restaurants = [];

// 初期化
async function init() {
  try {
    // 位置情報取得
    const position = await getCurrentPosition();
    userLocation = {
      lat: position.coords.latitude,
      lng: position.coords.longitude
    };
    
    document.getElementById('status').textContent = 
      `📍 現在地: ${userLocation.lat.toFixed(4)}, ${userLocation.lng.toFixed(4)}`;
    
    // 店舗検索
    await fetchNearbyRestaurants();
    
  } catch (error) {
    console.error('Error:', error);
    document.getElementById('status').textContent = 
      '❌ エラーが発生しました: ' + error.message;
  }
}

// 位置情報取得
function getCurrentPosition() {
  return new Promise((resolve, reject) => {
    if (!navigator.geolocation) {
      reject(new Error('位置情報がサポートされていません'));
      return;
    }
    navigator.geolocation.getCurrentPosition(resolve, reject);
  });
}

// Google Places API呼び出し
function fetchNearbyRestaurants() {
  return new Promise((resolve, reject) => {
    const map = new google.maps.Map(document.createElement('div'));
    const service = new google.maps.places.PlacesService(map);
    
    const request = {
      location: new google.maps.LatLng(userLocation.lat, userLocation.lng),
      radius: 800,
      type: 'restaurant'
    };
    
    service.nearbySearch(request, (results, status) => {
      if (status === google.maps.places.PlacesServiceStatus.OK) {
        restaurants = results;
        document.getElementById('restaurant-count').textContent = 
          `🔍 周辺の店舗: ${results.length}件見つかりました`;
        resolve(results);
      } else {
        reject(new Error('店舗検索に失敗しました'));
      }
    });
  });
}

// ルーレット実行
document.getElementById('rouletteBtn').addEventListener('click', () => {
  if (restaurants.length === 0) {
    alert('店舗データがありません');
    return;
  }
  
  const randomIndex = Math.floor(Math.random() * restaurants.length);
  const selected = restaurants[randomIndex];
  const withCompanion = document.getElementById('companionCheckbox').checked;
  
  // 結果表示
  let resultHTML = `
    <h2>今日は『${selected.name}』!</h2>
    <p>ジャンル: ${selected.types[0]}</p>
    <p>評価: ${'★'.repeat(Math.floor(selected.rating || 0))}</p>
  `;
  
  if (withCompanion) {
    resultHTML += `<p>👥 同行者: 福室さん</p>`;
  }
  
  resultHTML += `
    <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(selected.name)}&query_place_id=${selected.place_id}" target="_blank">
      📍 地図で見る
    </a>
    <button id="addToOutlookBtn" style="display:block; margin-top:10px;">
      📅 Outlookに予定を追加
    </button>
  `;
  
  document.getElementById('result').innerHTML = resultHTML;
  
  // Outlookボタンのイベント
  document.getElementById('addToOutlookBtn').addEventListener('click', () => {
    downloadICSFile(selected, withCompanion);
    alert('カレンダーファイルをダウンロードしました！\nファイルを開いてOutlookに登録してください。');
  });
});

// .icsファイル生成・ダウンロード
function downloadICSFile(restaurant, withCompanion) {
  const today = new Date();
  const lunchStart = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 12, 0, 0);
  const lunchEnd = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 13, 0, 0);
  
  const formatICSDate = (date) => {
    return date.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
  };
  
  let icsContent = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//ランチルーレット//JP
CALSCALE:GREGORIAN
METHOD:REQUEST
BEGIN:VEVENT
UID:lunch-${Date.now()}@lunch-roulette.com
DTSTAMP:${formatICSDate(new Date())}
DTSTART:${formatICSDate(lunchStart)}
DTEND:${formatICSDate(lunchEnd)}
SUMMARY:🍱 ランチ @ ${restaurant.name}
LOCATION:${restaurant.name} - ${restaurant.vicinity}
DESCRIPTION:ランチルーレットで決定！\\n\\nジャンル: ${restaurant.types[0]}\\n評価: ${'★'.repeat(Math.floor(restaurant.rating || 0))}\\n\\nGoogle Maps: https://www.google.com/maps/search/?api=1&query_place_id=${restaurant.place_id}
`;

  if (withCompanion) {
    icsContent += `ATTENDEE;CN=福室;RSVP=TRUE;PARTSTAT=NEEDS-ACTION;ROLE=REQ-PARTICIPANT:mailto:${CONFIG.FUKUMURO_EMAIL || 'fukumuro@example.com'}\n`;
  }
  
  icsContent += `STATUS:CONFIRMED
SEQUENCE:0
END:VEVENT
END:VCALENDAR`;

  const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = `lunch-${restaurant.name.replace(/[^a-zA-Z0-9]/g, '-')}-${Date.now()}.ics`;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  URL.revokeObjectURL(link.href);
}

// ページ読み込み時に初期化
window.addEventListener('load', init);
```

---

## 📝 補足事項

### 技術的な注意点
- ブラウザ対応: Chrome/Safari/Firefoxの最新版
- **HTTPSが必須**: Geolocation APIはHTTPSまたはlocalhostでのみ動作 🆕
- ローカル開発環境で動作確認
- 本番はGitHub Pages(HTTPS対応)やNetlifyなどで簡易デプロイ可能

### Google API関連の注意 🆕

#### 料金について
- **無料枠**: 月$200分のクレジット
- Nearby Search: 1,000リクエストあたり$32
- ハッカソン規模なら無料枠内で十分

#### APIキー管理
- **公開リポジトリにAPIキーをコミットしない**
- `.gitignore`に`config.js`を追加
- HTTP Referer制限を設定して悪用防止
- 使用量をGoogle Cloud Consoleで監視

#### CORS対策
- **Places JavaScript APIを使用**(推奨)
- REST APIを直接呼ぶ場合はプロキシ経由

#### 制限事項
- API呼び出しに時間がかかる場合がある(1-3秒)
- 位置情報の精度に依存
- 店舗情報が常に最新とは限らない

### Outlookカレンダー連携の注意 🆕

#### .icsファイルについて
- **iCalendar標準形式**: RFC 5545準拠
- すべての主要カレンダーアプリで互換性あり
  - Microsoft Outlook
  - Google Calendar
  - Apple Calendar
  - その他

#### 実装方法の選択
1. **.icsファイル生成**(推奨): 
   - 最もシンプル
   - 認証不要
   - すべてのカレンダーアプリで動作
   - ハッカソンに最適
   
2. **Outlook Web URL**: 
   - Outlookブラウザ版を開く
   - Microsoft アカウントへのログインが必要
   
3. **Microsoft Graph API**: 
   - 直接カレンダーに登録
   - OAuth認証が必要(複雑)
   - ハッカソンには不向き

#### 福室さんのメールアドレス
- **実際のメールアドレスに変更する必要あり**
- `config.js`で一元管理推奨
- プライバシーに配慮した管理

#### タイムゾーン
- 日本時間(Asia/Tokyo)で統一
- .icsファイルはUTC表記に変換が必要

### チーム開発のヒント
- 役割分担: API担当、フロント担当、ロジック担当、資料担当など
- バージョン管理: Gitを使うと便利(時間があれば)
- コミュニケーション: こまめに進捗共有
- **API設定は最初に完了させる**(後回しにすると時間がかかる) 🆕

### デモ時のコツ 🆕
- 位置情報の許可が必要なことを事前に説明
- ネットワーク接続を確認
- APIがタイムアウトした場合の代替案を用意
- スマホでのデモも効果的

---

## 🎉 プレゼンテーション構成案

### 構成(合計3-4分)

#### 1. **問題提起** (30秒)
- 「ランチ選び、迷いませんか?」
- 「検索しても多すぎて決められない...」
- 「時間がなくて近くの店がわからない...」

#### 2. **ソリューション紹介** (1分)
- ランチルーレットの説明
- **実際の店舗データを使っている点を強調** 🆕
- **「現在地から本当に行ける店」が出る** 🆕
- **福室さんとランチの予定を自動登録できる** 🆕
- デモ実演(実際にルーレットを回す)

#### 3. **技術・仕組み** (1-1.5分)
- 使用技術の説明
  - Geolocation APIで現在地取得 🆕
  - Google Places APIでリアルタイム店舗検索 🆕
  - 条件フィルタリング + ランダム抽選
  - .icsファイル生成でOutlookカレンダー連携 🆕
- **システムフロー図を見せる** 🆕
  1. 位置情報取得 → 2. API呼び出し → 3. データ整形 → 4. フィルタリング → 5. 抽選 → 6. カレンダー登録 🆕

#### 4. **AI活用ポイント** (30秒-1分)
- どのようにAIを活用したか
  - 位置情報取得コードの生成
  - Google API連携ロジックの実装
  - 距離計算式の実装
  - エラーハンドリングの実装
  - UI/UXのアドバイス
- **開発時間の大幅短縮を実現** 🆕

#### 5. **今後の展望** (30秒)
- 追加したい機能
  - お気に入り機能
  - 口コミ表示
  - ユーザーの好み学習
- 実用化のアイデア
  - 社内ランチツールとして活用
  - 旅行先でも使える

### デモのポイント 🆕
- **実際にルーレットを回して、近くの店を表示**
- 「この店、本当にありますよ!」と強調
- **福室さんのチェックボックスをオンにしてデモ** 🆕
- Google Mapsリンクをクリックして実在を証明
- **「Outlookに予定を追加」をクリックして.icsファイルをダウンロード** 🆕
- **ダウンロードしたファイルをOutlookで開いて、福室さんが参加者に入っていることを確認** 🆕
- 条件を変えて複数回デモ
- スマホでの動作も見せる(時間があれば)

### アピールポイント 🆕
1. **リアルデータ活用**: サンプルデータではなく実際の店舗情報
2. **実用性**: 今日から使える
3. **業務効率化**: ランチの予定調整を自動化 🆕
4. **コラボレーション**: 福室さんとの予定を簡単に調整 🆕
5. **技術力**: API連携、位置情報処理、カレンダー統合 🆕
6. **AI活用**: 開発効率化を実現
7. **UX**: シンプルで直感的

---

**Let's Hack the Everyday! 🚀**
